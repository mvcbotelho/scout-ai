# Scout AI

Um sistema de scouting de jogadores desenvolvido em Go que utiliza o framework Gin e PostgreSQL para gerenciar dados de atletas de futebol.

## üìã Descri√ß√£o

O Scout AI √© uma aplica√ß√£o backend desenvolvida em Go que fornece uma API REST completa para gerenciamento de dados de jogadores de futebol. O sistema permite criar, consultar, atualizar e deletar informa√ß√µes de atletas, incluindo estat√≠sticas como gols, tackles e passes. O projeto est√° estruturado para ser facilmente containerizado e deployado usando Docker.

## üöÄ Tecnologias Utilizadas

- **Go 1.22** - Linguagem de programa√ß√£o principal
- **Gin Framework** - Framework web para Go
- **GORM** - ORM para Go
- **PostgreSQL** - Banco de dados relacional
- **Docker** - Containeriza√ß√£o da aplica√ß√£o
- **Docker Compose** - Orquestra√ß√£o de containers
- **Testify** - Framework de testes
- **Ollama3** - Modelo de linguagem local para an√°lise inteligente

## üìÅ Estrutura do Projeto

```
scout-ai/
‚îú‚îÄ‚îÄ docker-compose.yml          # Configura√ß√£o do Docker Compose
‚îú‚îÄ‚îÄ Makefile                    # Comandos de automa√ß√£o
‚îú‚îÄ‚îÄ README.md                   # Este arquivo
‚îú‚îÄ‚îÄ .gitignore                  # Arquivos ignorados pelo Git
‚îî‚îÄ‚îÄ go-backend/                 # C√≥digo fonte do backend
    ‚îú‚îÄ‚îÄ cmd/
    ‚îÇ   ‚îî‚îÄ‚îÄ main.go            # Ponto de entrada da aplica√ß√£o
    ‚îú‚îÄ‚îÄ handlers/
    ‚îÇ   ‚îú‚îÄ‚îÄ playerHandler.go   # Handlers para endpoints de jogadores
    ‚îÇ   ‚îú‚îÄ‚îÄ playerHandler_test.go # Testes dos handlers de jogadores
    ‚îÇ   ‚îú‚îÄ‚îÄ analyzeHandler.go  # Handlers para an√°lise com IA
    ‚îÇ   ‚îú‚îÄ‚îÄ analyzeHandler_test.go # Testes dos handlers de an√°lise
    ‚îÇ   ‚îî‚îÄ‚îÄ ollamaHandler.go   # Integra√ß√£o com Ollama3
    ‚îú‚îÄ‚îÄ models/
    ‚îÇ   ‚îî‚îÄ‚îÄ player.go          # Modelo de dados do jogador
    ‚îú‚îÄ‚îÄ Dockerfile             # Configura√ß√£o do container Docker
    ‚îú‚îÄ‚îÄ go.mod                 # Depend√™ncias do Go
    ‚îî‚îÄ‚îÄ go.sum                 # Checksums das depend√™ncias
```

## üõ†Ô∏è Pr√©-requisitos

- [Go 1.22](https://golang.org/dl/) ou superior
- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)

## ‚öôÔ∏è Instala√ß√£o e Execu√ß√£o

### Op√ß√£o 1: Execu√ß√£o com Docker (Recomendado)

1. Clone o reposit√≥rio:
```bash
git clone <url-do-repositorio>
cd scout-ai
```

2. Execute com Docker Compose:
```bash
docker-compose up --build
```

3. **Configure o Ollama (ap√≥s os servi√ßos iniciarem):**
```bash
# Aguarde alguns segundos e execute:
make setup-ollama
```

**OU use o comando completo:**
```bash
make deploy-with-ollama
```

A aplica√ß√£o estar√° dispon√≠vel em `http://localhost:8080`
O banco PostgreSQL estar√° dispon√≠vel na porta `5432`
O Ollama estar√° dispon√≠vel na porta `11434`

### Op√ß√£o 2: Execu√ß√£o Local

1. Clone o reposit√≥rio:
```bash
git clone <url-do-repositorio>
cd scout-ai
```

2. Configure o banco PostgreSQL localmente ou use Docker:
```bash
docker run --name postgres-scout -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=scoutdb -p 5432:5432 -d postgres:15
```

3. Navegue para o diret√≥rio do backend:
```bash
cd go-backend
```

4. Baixe as depend√™ncias:
```bash
go mod download
```

5. Execute a aplica√ß√£o:
```bash
go run cmd/main.go
```

### Op√ß√£o 3: Usando Makefile

O projeto inclui um Makefile com comandos √∫teis:

```bash
# Ver todos os comandos dispon√≠veis
make help

# Executar em modo desenvolvimento
make dev

# Construir e executar com Docker
make docker-build
make docker-up

# Executar testes
make test

# Verificar status dos servi√ßos
make check
```

## üîß Endpoints da API

### Health Check
- **GET** `/ping`
  - **Descri√ß√£o**: Endpoint de verifica√ß√£o de sa√∫de da aplica√ß√£o
  - **Resposta**: `{"message": "pong"}`
  - **Status**: 200 OK

### Jogadores (Players)

#### Criar Jogador
- **POST** `/players`
  - **Descri√ß√£o**: Cria um novo jogador
  - **Valida√ß√µes**: Nome obrigat√≥rio, idade > 0
  - **Body**: 
    ```json
    {
      "name": "Jo√£o Silva",
      "age": 25,
      "position": "Atacante",
      "team": "Flamengo",
      "goals": 15,
      "tackles": 5,
      "passes": 120
    }
    ```
  - **Status**: 201 Created
  - **Erro**: 400 Bad Request (dados inv√°lidos)

#### Listar Jogadores
- **GET** `/players`
  - **Descri√ß√£o**: Retorna todos os jogadores cadastrados
  - **Status**: 200 OK

#### Buscar Jogador por ID
- **GET** `/players/:id`
  - **Descri√ß√£o**: Retorna um jogador espec√≠fico pelo ID
  - **Valida√ß√µes**: ID deve ser um n√∫mero v√°lido
  - **Status**: 200 OK
  - **Erro**: 404 Not Found (jogador n√£o encontrado)

#### Atualizar Jogador
- **PUT** `/players/:id`
  - **Descri√ß√£o**: Atualiza dados de um jogador
  - **Valida√ß√µes**: ID v√°lido, nome obrigat√≥rio, idade > 0
  - **Body**: Mesmo formato do POST
  - **Status**: 200 OK
  - **Erro**: 404 Not Found (jogador n√£o encontrado)

#### Deletar Jogador
- **DELETE** `/players/:id`
  - **Descri√ß√£o**: Remove um jogador do sistema
  - **Valida√ß√µes**: ID deve ser um n√∫mero v√°lido
  - **Status**: 200 OK
  - **Erro**: 404 Not Found (jogador n√£o encontrado)

### An√°lise de Jogadores (AI-Powered Analysis)

#### Analisar Jogador Espec√≠fico
- **GET** `/analyze/players/:id`
  - **Descri√ß√£o**: Gera an√°lise completa de um jogador usando IA
  - **Par√¢metros**: 
    - `ai=true` - Usar Ollama3 para an√°lise (opcional)
  - **Valida√ß√µes**: ID deve ser um n√∫mero v√°lido
  - **Resposta**:
    ```json
    {
      "player_id": 1,
      "player_name": "Jo√£o Silva",
      "analysis": "Jo√£o Silva demonstra caracter√≠sticas de um atacante moderno e vers√°til. Com 25 anos, est√° na idade ideal para desenvolvimento e consolida√ß√£o de carreira. Sua m√©dia de 0.5 gols por jogo √© impressionante, demonstrando excelente efici√™ncia de finaliza√ß√£o. A participa√ß√£o de 120 passes na temporada mostra que n√£o √© apenas um finalizador, mas tamb√©m contribui para a constru√ß√£o do jogo. Sua efici√™ncia de 123.0 pontos o classifica como um jogador de n√≠vel Bom, adequado para competi√ß√µes de n√≠vel m√©dio a alto. Recomendo aten√ß√£o especial ao seu potencial de evolu√ß√£o, considerando sua idade e versatilidade t√©cnica.",
      "insights": [
        "Excelente efici√™ncia de finaliza√ß√£o com 0.5 gols por jogo",
        "Participa√ß√£o ativa na constru√ß√£o do jogo com 120 passes",
        "Idade ideal para desenvolvimento e consolida√ß√£o",
        "Versatilidade t√©cnica como atacante moderno"
      ],
      "rating": 8,
      "position": "Atacante",
      "team": "Flamengo",
      "ai_used": true
    }
    ```
  - **Status**: 200 OK
  - **Erro**: 404 Not Found (jogador n√£o encontrado)

#### Analisar Todos os Jogadores
- **GET** `/analyze/players`
  - **Descri√ß√£o**: Gera an√°lise individual e comparativa de todos os jogadores
  - **Par√¢metros**: 
    - `ai=true` - Usar Ollama3 para an√°lise (opcional)
  - **Resposta**:
    ```json
    {
      "individual_analyses": [
        {
          "player_id": 1,
          "player_name": "Jo√£o Silva",
          "analysis": "...",
          "insights": [...],
          "rating": 8,
          "position": "Atacante",
          "team": "Flamengo",
          "ai_used": true
        }
      ],
      "comparative_analysis": {
        "total_players": 4,
        "total_goals": 25,
        "total_tackles": 185,
        "total_passes": 735,
        "positions_distribution": {
          "Atacante": 1,
          "Meio-campo": 1,
          "Zagueiro": 1,
          "Goleiro": 1
        },
        "best_scorer": {
          "name": "Jo√£o Silva",
          "goals": 15,
          "team": "Flamengo"
        },
        "best_tackler": {
          "name": "Carlos Oliveira",
          "tackles": 120,
          "team": "S√£o Paulo"
        },
        "best_passer": {
          "name": "Pedro Santos",
          "passes": 350,
          "team": "Palmeiras"
        },
        "ai_comparative_analysis": "An√°lise comparativa gerada pelo Ollama3..."
      }
    }
    ```
  - **Status**: 200 OK

#### Comparar Jogadores
- **GET** `/analyze/compare?ids=1&ids=2&ids=3`
  - **Descri√ß√£o**: Compara dois ou mais jogadores especificados
  - **Par√¢metros**: 
    - `ids` - IDs dos jogadores (m√≠nimo 2)
    - `ai=true` - Usar Ollama3 para an√°lise (opcional)
  - **Valida√ß√µes**: Pelo menos 2 IDs v√°lidos
  - **Resposta**:
    ```json
    {
      "players": [
        {
          "player_id": 1,
          "player_name": "Jo√£o Silva",
          "analysis": "...",
          "insights": [...],
          "rating": 8,
          "position": "Atacante",
          "team": "Flamengo",
          "ai_used": true
        }
      ],
      "comparison": {
        "highest_rating": {...},
        "most_goals": {...},
        "most_tackles": {...},
        "most_passes": {...}
      },
      "ai_comparative_analysis": "An√°lise comparativa detalhada gerada pelo Ollama3..."
    }
    ```
  - **Status**: 200 OK
  - **Erro**: 400 Bad Request (IDs insuficientes), 404 Not Found (jogadores n√£o encontrados)

## üìù Exemplos de Uso

### Exemplos para Postman/Insomnia

#### Exemplo 1 - Atacante
```json
{
    "name": "Jo√£o Silva",
    "age": 25,
    "position": "Atacante",
    "team": "Flamengo",
    "goals": 15,
    "tackles": 5,
    "passes": 120
}
```

#### Exemplo 2 - Meio-campista
```json
{
    "name": "Pedro Santos",
    "age": 28,
    "position": "Meio-campo",
    "team": "Palmeiras",
    "goals": 8,
    "tackles": 45,
    "passes": 350
}
```

#### Exemplo 3 - Zagueiro
```json
{
    "name": "Carlos Oliveira",
    "age": 32,
    "position": "Zagueiro",
    "team": "S√£o Paulo",
    "goals": 2,
    "tackles": 120,
    "passes": 180
}
```

#### Exemplo 4 - Goleiro
```json
{
    "name": "Rafael Costa",
    "age": 29,
    "position": "Goleiro",
    "team": "Corinthians",
    "goals": 0,
    "tackles": 15,
    "passes": 85
}
```

### Exemplos de An√°lise com IA

#### Analisar Jogador Espec√≠fico
**M√©todo:** GET  
**URL:** `http://localhost:8080/analyze/players/1?ai=true`  
**Resposta esperada:**
```json
{
    "player_id": 1,
    "player_name": "Jo√£o Silva",
    "analysis": "Jo√£o Silva demonstra caracter√≠sticas de um atacante moderno e vers√°til. Com 25 anos, est√° na idade ideal para desenvolvimento e consolida√ß√£o de carreira. Sua m√©dia de 0.5 gols por jogo √© impressionante, demonstrando excelente efici√™ncia de finaliza√ß√£o. A participa√ß√£o de 120 passes na temporada mostra que n√£o √© apenas um finalizador, mas tamb√©m contribui para a constru√ß√£o do jogo. Sua efici√™ncia de 123.0 pontos o classifica como um jogador de n√≠vel Bom, adequado para competi√ß√µes de n√≠vel m√©dio a alto. Recomendo aten√ß√£o especial ao seu potencial de evolu√ß√£o, considerando sua idade e versatilidade t√©cnica.",
    "insights": [
        "Excelente efici√™ncia de finaliza√ß√£o com 0.5 gols por jogo",
        "Participa√ß√£o ativa na constru√ß√£o do jogo com 120 passes",
        "Idade ideal para desenvolvimento e consolida√ß√£o",
        "Versatilidade t√©cnica como atacante moderno"
    ],
    "rating": 8,
    "position": "Atacante",
    "team": "Flamengo",
    "ai_used": true
}
```

#### Analisar Todos os Jogadores
**M√©todo:** GET  
**URL:** `http://localhost:8080/analyze/players`  
**Resposta:** An√°lise individual de cada jogador + an√°lise comparativa geral

#### Comparar Jogadores
**M√©todo:** GET  
**URL:** `http://localhost:8080/analyze/compare?ids=1&ids=2&ids=3`  
**Resposta:** Compara√ß√£o detalhada entre os jogadores especificados

### Exemplos com cURL
```bash
# Health check
curl http://localhost:8080/ping

# Criar jogador
curl -X POST http://localhost:8080/players \
  -H "Content-Type: application/json" \
  -d '{"name":"Jo√£o Silva","age":25,"position":"Atacante","team":"Flamengo","goals":15,"tackles":5,"passes":120}'

# Listar jogadores
curl http://localhost:8080/players

# Buscar jogador por ID
curl http://localhost:8080/players/1

# Atualizar jogador
curl -X PUT http://localhost:8080/players/1 \
  -H "Content-Type: application/json" \
  -d '{"name":"Jo√£o Silva","age":26,"position":"Atacante","team":"Flamengo","goals":18,"tackles":5,"passes":125}'

# Deletar jogador
curl -X DELETE http://localhost:8080/players/1

# Analisar jogador espec√≠fico
curl http://localhost:8080/analyze/players/1

# Analisar jogador com IA (Ollama3)
curl "http://localhost:8080/analyze/players/1?ai=true"

# Analisar todos os jogadores
curl http://localhost:8080/analyze/players

# Analisar todos os jogadores com IA
curl "http://localhost:8080/analyze/players?ai=true"

# Comparar jogadores
curl "http://localhost:8080/analyze/compare?ids=1&ids=2&ids=3"

# Comparar jogadores com IA
curl "http://localhost:8080/analyze/compare?ids=1&ids=2&ids=3&ai=true"
```

### Exemplos com PowerShell
```powershell
# Criar jogador
$body = @{
    name     = "Jo√£o Silva"
    age      = 25
    position = "Atacante"
    team     = "Flamengo"
    goals    = 15
    tackles  = 5
    passes   = 120
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/players" -Method Post -Body $body -ContentType "application/json"

# Analisar jogador
Invoke-RestMethod -Uri "http://localhost:8080/analyze/players/1" -Method Get

# Analisar jogador com IA
Invoke-RestMethod -Uri "http://localhost:8080/analyze/players/1?ai=true" -Method Get

# Analisar todos os jogadores
Invoke-RestMethod -Uri "http://localhost:8080/analyze/players" -Method Get

# Analisar todos os jogadores com IA
Invoke-RestMethod -Uri "http://localhost:8080/analyze/players?ai=true" -Method Get

# Comparar jogadores
Invoke-RestMethod -Uri "http://localhost:8080/analyze/compare?ids=1&ids=2" -Method Get

# Comparar jogadores com IA
Invoke-RestMethod -Uri "http://localhost:8080/analyze/compare?ids=1&ids=2&ai=true" -Method Get
```

## üóÑÔ∏è Modelo de Dados

### Player (Jogador)
```go
type Player struct {
    gorm.Model        // ID, CreatedAt, UpdatedAt, DeletedAt
    Name     string   `json:"name" binding:"required" gorm:"not null"`     // Nome do jogador (obrigat√≥rio)
    Age      int      `json:"age" binding:"required,min=1,max=100" gorm:"not null"`      // Idade (1-100)
    Position string   `json:"position" binding:"required" gorm:"not null"` // Posi√ß√£o (obrigat√≥rio)
    Team     string   `json:"team" binding:"required" gorm:"not null"`     // Time atual (obrigat√≥rio)
    Goals    int      `json:"goals" binding:"min=0" gorm:"default:0"`    // N√∫mero de gols (>= 0)
    Tackles  int      `json:"tackles" binding:"min=0" gorm:"default:0"`  // N√∫mero de tackles (>= 0)
    Passes   int      `json:"passes" binding:"min=0" gorm:"default:0"`   // N√∫mero de passes (>= 0)
}
```

## üß™ Testes

O projeto inclui testes automatizados para os handlers:

```bash
# Executar todos os testes
go test ./...

# Executar testes com verbose
go test ./handlers -v

# Executar testes com cobertura
go test ./handlers -cover
```

**Nota**: Os testes usam SQLite em mem√≥ria e podem requerer depend√™ncias C no Windows.

## üê≥ Configura√ß√£o Docker

### Docker Compose
O arquivo `docker-compose.yml` configura tr√™s servi√ßos:

1. **go-backend**: Aplica√ß√£o Go
   - Build do contexto `./go-backend`
   - Porta `8080:8080`
   - Vari√°veis de ambiente para conex√£o com banco e Ollama
   - Depend√™ncia dos servi√ßos `db` e `ollama`

2. **db**: Banco PostgreSQL
   - Imagem `postgres:15`
   - Porta `5432:5432`
   - Volume persistente para dados
   - Vari√°veis de ambiente configuradas

3. **ollama**: Servi√ßo Ollama3
   - Imagem `ollama/ollama:latest`
   - Porta `11434:11434`
   - Volume persistente para modelos
   - Download autom√°tico do modelo `llama3.2`

### Dockerfile
O projeto utiliza um Dockerfile multi-stage para otimizar o tamanho da imagem final:

1. **Etapa de Build**: Compila a aplica√ß√£o usando `golang:1.22-alpine`
2. **Etapa de Execu√ß√£o**: Cria uma imagem final baseada em `alpine:latest`

## üì¶ Depend√™ncias Principais

- `github.com/gin-gonic/gin v1.10.1` - Framework web Gin
- `gorm.io/gorm v1.25.9` - ORM para Go
- `gorm.io/driver/postgres v1.4.6` - Driver PostgreSQL para GORM
- `github.com/stretchr/testify v1.9.0` - Framework de testes
- Depend√™ncias de suporte para JSON, valida√ß√£o, e outras funcionalidades

## üîç Desenvolvimento

### Estrutura do C√≥digo

- **`cmd/main.go`**: Ponto de entrada da aplica√ß√£o, configura√ß√£o do servidor e rotas
- **`handlers/playerHandler.go`**: Handlers HTTP para opera√ß√µes CRUD de jogadores
- **`handlers/playerHandler_test.go`**: Testes automatizados dos handlers de jogadores
- **`handlers/analyzeHandler.go`**: Handlers HTTP para an√°lise de jogadores com IA
- **`handlers/analyzeHandler_test.go`**: Testes automatizados dos handlers de an√°lise
- **`handlers/ollamaHandler.go`**: Integra√ß√£o com Ollama3
- **`models/player.go`**: Modelo de dados do jogador usando GORM

### Melhorias Implementadas

1. **Valida√ß√£o de Dados**: Todos os endpoints validam dados de entrada
2. **Tratamento de Erros**: Mensagens de erro em portugu√™s e c√≥digos HTTP apropriados
3. **Verifica√ß√£o de Exist√™ncia**: Endpoints verificam se recursos existem antes de opera√ß√µes
4. **Vari√°veis de Ambiente**: Configura√ß√£o flex√≠vel via vari√°veis de ambiente
5. **Testes Automatizados**: Cobertura de testes para handlers
6. **Makefile**: Comandos √∫teis para desenvolvimento e deploy
7. **An√°lise com IA**: Sistema de an√°lise automatizada de jogadores
8. **Integra√ß√£o com Ollama3**: An√°lises mais naturais e contextuais
9. **Prompts Especializados**: Prompts espec√≠ficos para cada posi√ß√£o
10. **Fallback Inteligente**: Sistema de fallback para an√°lise est√°tica
11. **Compara√ß√£o de Jogadores**: Funcionalidade para comparar performance entre jogadores
12. **Insights Inteligentes**: Gera√ß√£o autom√°tica de insights baseados em dados
13. **Rating System**: Sistema de pontua√ß√£o de 1-10 para jogadores

## üöÄ Deploy

### Produ√ß√£o
Para deploy em produ√ß√£o, recomenda-se:

1. Usar vari√°veis de ambiente para configura√ß√µes sens√≠veis
2. Implementar logging estruturado
3. Adicionar m√©tricas e monitoramento
4. Configurar health checks mais robustos
5. Implementar rate limiting e seguran√ßa
6. Configurar backup do banco PostgreSQL
7. Usar secrets management para senhas

### Exemplo de Deploy com Docker Compose em Produ√ß√£o
```yaml
version: '3.8'
services:
  go-backend:
    build:
      context: ./go-backend
    ports:
      - "8080:8080"
    environment:
      - GIN_MODE=release
      - DB_HOST=db
      - DB_PORT=5432
      - DB_USER=${DB_USER}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_NAME=${DB_NAME}
    restart: unless-stopped
    depends_on:
      - db
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/ping"]
      interval: 30s
      timeout: 10s
      retries: 3

  db:
    image: postgres:15
    restart: always
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USER} -d ${DB_NAME}"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  postgres_data:
```

## ü§ù Contribui√ß√£o

1. Fa√ßa um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìù Licen√ßa

Este projeto est√° sob a licen√ßa [MIT](LICENSE).

## üë®‚Äçüíª Autor

**Marcus Botelho** - [GitHub](https://github.com/mvcbotelho) | [LinkedIn](https://www.linkedin.com/in/mvcbotelho/)

## üìû Suporte

Para suporte, abra uma issue no reposit√≥rio do projeto ou entre em contato atrav√©s do LinkedIn.

---

**Nota**: Este √© um projeto em desenvolvimento. Novas funcionalidades e melhorias est√£o sendo implementadas continuamente.

## ü§ñ Funcionalidades de IA

### Integra√ß√£o com Ollama3

O Scout AI agora integra com o **Ollama3**, um modelo de linguagem local que permite an√°lises mais sofisticadas e naturais dos jogadores. Esta integra√ß√£o oferece:

#### **Vantagens da Integra√ß√£o com Ollama3:**
- **An√°lises mais naturais**: Linguagem mais fluida e profissional
- **Insights contextuais**: An√°lises baseadas em conhecimento de futebol
- **Flexibilidade**: Funciona offline e localmente
- **Personaliza√ß√£o**: Prompts espec√≠ficos para scouting
- **Fallback inteligente**: Se Ollama n√£o estiver dispon√≠vel, usa an√°lise est√°tica

#### **Como Usar a IA:**
Adicione o par√¢metro `?ai=true` aos endpoints de an√°lise:

```bash
# An√°lise com IA
GET /analyze/players/1?ai=true

# An√°lise comparativa com IA
GET /analyze/players?ai=true

# Compara√ß√£o de jogadores com IA
GET /analyze/compare?ids=1&ids=2&ai=true
```

#### **Configura√ß√£o do Ollama3:**
O sistema est√° configurado para usar o modelo `llama3.2` por padr√£o, mas pode ser personalizado via vari√°veis de ambiente:

```yaml
environment:
  - OLLAMA_BASE_URL=http://ollama:11434
  - OLLAMA_MODEL=llama3.2
  - OLLAMA_TEMPERATURE=0.7
  - OLLAMA_TOP_P=0.9
```

#### **Prompts Especializados:**
O sistema gera prompts espec√≠ficos para cada posi√ß√£o:

- **Atacantes**: Foco em finaliza√ß√£o, participa√ß√£o no jogo e efici√™ncia
- **Meio-campistas**: An√°lise de vis√£o de jogo, distribui√ß√£o e marca√ß√£o
- **Zagueiros**: Avalia√ß√£o defensiva e sa√≠da de bola
- **Goleiros**: Comando de √°rea e sa√≠da do gol

### An√°lise Inteligente de Jogadores

O Scout AI utiliza algoritmos inteligentes para analisar dados de jogadores e gerar insights valiosos para scouting:

#### **Sistema de Rating (1-10)**
- Calcula pontua√ß√£o baseada em efici√™ncia, idade e performance
- Considera diferentes pesos para cada posi√ß√£o
- Ajusta rating baseado na experi√™ncia do jogador

#### **Gera√ß√£o de Insights**
- **Baseados na Idade**: Identifica jogadores jovens com potencial ou experientes para lideran√ßa
- **Baseados na Posi√ß√£o**: An√°lises espec√≠ficas para atacantes, meio-campistas, zagueiros e goleiros
- **Baseados na Performance**: Identifica jogadores com performance excepcional ou que precisam melhorar

#### **An√°lise Comparativa**
- Compara jogadores em diferentes categorias
- Identifica melhores artilheiros, marcadores e passadores
- Distribui√ß√£o de posi√ß√µes no elenco
- Estat√≠sticas gerais do time

#### **Recomenda√ß√µes Autom√°ticas**
- Sugere adequa√ß√£o para diferentes n√≠veis de competi√ß√£o
- Identifica jogadores prontos para times de alto n√≠vel
- Recomenda tempo de desenvolvimento para jogadores jovens

### Algoritmos Utilizados

#### **C√°lculo de Efici√™ncia por Posi√ß√£o**
```go
// Atacante: Foco em gols e participa√ß√£o no jogo
Efficiency = (Goals * 0.6) + (Passes * 0.4)

// Meio-campista: Equil√≠brio entre passes, marca√ß√£o e gols
Efficiency = (Passes * 0.5) + (Tackles * 0.3) + (Goals * 0.2)

// Zagueiro: Foco em marca√ß√£o e sa√≠da de bola
Efficiency = (Tackles * 0.6) + (Passes * 0.4)

// Goleiro: Foco em sa√≠da do gol
Efficiency = (Tackles * 0.8) + (Passes * 0.2)
```

#### **Sistema de Rating**
- **Base**: 5 pontos
- **Efici√™ncia > 200**: +3 pontos
- **Efici√™ncia > 150**: +2 pontos
- **Efici√™ncia > 100**: +1 ponto
- **Efici√™ncia < 50**: -1 ponto
- **Idade ideal (25-30)**: +1 ponto
- **Muito jovem (<20)**: -1 ponto

### Adicionando Novas Funcionalidades

1. Crie novos modelos no diret√≥rio `models/`
2. Implemente handlers no diret√≥rio `handlers/`
3. Adicione testes em `handlers/*_test.go`
4. Adicione novas rotas no arquivo `main.go`
5. Execute `db.AutoMigrate()` para o novo modelo
6. Atualize as depend√™ncias se necess√°rio com `go mod tidy` 

## üîß Troubleshooting

### Problemas Comuns

#### **Erro no Ollama: "unknown command"**
Se voc√™ ver erros como `Error: unknown command "sh" for "ollama"`:

1. **Pare os containers:**
```bash
docker-compose down
```

2. **Reinicie com configura√ß√£o correta:**
```bash
make deploy-with-ollama
```

#### **Ollama n√£o est√° respondendo**
Se os endpoints com `?ai=true` retornam an√°lise est√°tica:

1. **Verifique se o Ollama est√° rodando:**
```bash
make ollama-status
```

2. **Configure o Ollama manualmente:**
```bash
make setup-ollama
```

3. **Verifique os logs:**
```bash
docker-compose logs ollama
```

#### **Modelo n√£o encontrado**
Se o Ollama n√£o consegue baixar o modelo:

1. **Verifique a conex√£o:**
```bash
curl http://localhost:11434/api/tags
```

2. **Baixe o modelo manualmente:**
```bash
curl -X POST http://localhost:11434/api/pull \
  -H "Content-Type: application/json" \
  -d '{"name": "llama3.2"}'
```

#### **Fallback para An√°lise Est√°tica**
Se o Ollama n√£o estiver dispon√≠vel, o sistema automaticamente usa an√°lise est√°tica. Voc√™ pode verificar isso no campo `ai_used: false` na resposta.

### Comandos √öteis

```bash
# Verificar status de todos os servi√ßos
make check

# Verificar status do Ollama
make ollama-status

# Configurar Ollama
make setup-ollama

# Logs do Ollama
docker-compose logs ollama

# Reiniciar apenas o Ollama
docker-compose restart ollama
```

#### **Erro de Migra√ß√£o: "insufficient arguments"**
Se voc√™ ver erros como `Erro ao fazer migra√ß√£o: insufficient arguments`:

1. **Pare os containers:**
```bash
docker-compose down
```

2. **Limpe os volumes (cuidado - isso apaga os dados):**
```bash
docker-compose down -v
```

3. **Reinicie com configura√ß√£o correta:**
```bash
make deploy-with-ollama
```

**Causa:** O banco de dados n√£o estava totalmente pronto quando a aplica√ß√£o tentou fazer a migra√ß√£o.

**Solu√ß√£o:** Adicionamos healthcheck e retry autom√°tico para resolver este problema. 